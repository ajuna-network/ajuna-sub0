//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

using Ajuna.NetApi.Model.Types.Base;
using Ajuna.ServiceLayer.Attributes;
using HelloKusama.RestService.Generated.Storage;
using Microsoft.AspNetCore.Mvc;
using System.Collections.Generic;
using System.Threading.Tasks;


namespace HelloKusama.RestService.Generated.Controller
{
    
    
    /// <summary>
    /// RecoveryController controller to access storages.
    /// </summary>
    [ApiController()]
    [Route("[controller]")]
    public sealed class RecoveryController : ControllerBase
    {
        
        private IRecoveryStorage _recoveryStorage;
        
        /// <summary>
        /// RecoveryController constructor.
        /// </summary>
        public RecoveryController(IRecoveryStorage recoveryStorage)
        {
            _recoveryStorage = recoveryStorage;
        }
        
        /// <summary>
        /// >> Recoverable
        ///  The set of recoverable accounts and their recovery configuration.
        /// </summary>
        [HttpGet("Recoverable")]
        [ProducesResponseType(typeof(HelloKusama.NetApiExt.Generated.Model.pallet_recovery.RecoveryConfig), 200)]
        [StorageKeyBuilder(typeof(HelloKusama.NetApiExt.Generated.Storage.RecoveryStorage), "RecoverableParams", typeof(HelloKusama.NetApiExt.Generated.Model.sp_core.crypto.AccountId32))]
        public IActionResult GetRecoverable(string key)
        {
            return this.Ok(_recoveryStorage.GetRecoverable(key));
        }
        
        /// <summary>
        /// >> ActiveRecoveries
        ///  Active recovery attempts.
        /// 
        ///  First account is the account to be recovered, and the second account
        ///  is the user trying to recover the account.
        /// </summary>
        [HttpGet("ActiveRecoveries")]
        [ProducesResponseType(typeof(HelloKusama.NetApiExt.Generated.Model.pallet_recovery.ActiveRecovery), 200)]
        [StorageKeyBuilder(typeof(HelloKusama.NetApiExt.Generated.Storage.RecoveryStorage), "ActiveRecoveriesParams", typeof(Ajuna.NetApi.Model.Types.Base.BaseTuple<HelloKusama.NetApiExt.Generated.Model.sp_core.crypto.AccountId32, HelloKusama.NetApiExt.Generated.Model.sp_core.crypto.AccountId32>))]
        public IActionResult GetActiveRecoveries(string key)
        {
            return this.Ok(_recoveryStorage.GetActiveRecoveries(key));
        }
        
        /// <summary>
        /// >> Proxy
        ///  The list of allowed proxy accounts.
        /// 
        ///  Map from the user who can access it to the recovered account.
        /// </summary>
        [HttpGet("Proxy")]
        [ProducesResponseType(typeof(HelloKusama.NetApiExt.Generated.Model.sp_core.crypto.AccountId32), 200)]
        [StorageKeyBuilder(typeof(HelloKusama.NetApiExt.Generated.Storage.RecoveryStorage), "ProxyParams", typeof(HelloKusama.NetApiExt.Generated.Model.sp_core.crypto.AccountId32))]
        public IActionResult GetProxy(string key)
        {
            return this.Ok(_recoveryStorage.GetProxy(key));
        }
    }
}
